<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>NuEdit | CRISPR Visualizer</title>
    <style>
        body { background: #010409; color: #e6edf3; font-family: 'Courier New', monospace; padding: 40px; overflow-x: hidden; }
        .header { border-bottom: 2px solid #00f2ff; padding-bottom: 20px; margin-bottom: 40px; }
        .dna-track { background: #0d1117; padding: 60px 20px; border-radius: 15px; position: relative; min-height: 100px; display: flex; align-items: center; justify-content: center; }
        
        .strand { font-size: 2.5rem; letter-spacing: 12px; white-space: nowrap; transition: 1s; }
        .mutation { color: #f85149; text-decoration: underline; font-weight: bold; }
        
        /* 유전자 가위(Cas9) 애니메이션 */
        .cas9 { position: absolute; font-size: 4rem; top: -20px; left: -100px; transition: all 2.5s cubic-bezier(0.45, 0.05, 0.55, 0.95); opacity: 0; filter: drop-shadow(0 0 10px #00f2ff); }
        
        .log-panel { margin-top: 50px; background: #161b22; padding: 25px; border-radius: 10px; border-left: 10px solid #00f2ff; }
        .status-dot { height: 10px; width: 10px; background-color: #00f2ff; border-radius: 50%; display: inline-block; margin-right: 10px; animation: blink 1s infinite; }
        
        @keyframes blink { 0% { opacity: 0; } 50% { opacity: 1; } 100% { opacity: 0; } }
        .success { color: #3fb950; font-weight: bold; }
    </style>
</head>
<body>
    <div class="header">
        <h2 style="margin:0; color:#00f2ff;">PROPRIETARY SIMULATION: GENE EDITING PROCESS</h2>
        <small>NuEdit Lab Systems | TP53 Precision Protocol</small>
    </div>

    <div class="dna-track" id="track">
        <div id="cas9" class="cas9">✂️</div>
        <div id="dnaStrand" class="strand"></div>
    </div>

    <div class="log-panel">
        <div id="statusLog">
            <p><span class="status-dot"></span>데이터 스트림 수신 중...</p>
        </div>
    </div>

    <script>
        const input = localStorage.getItem('targetDNA');
        const strand = document.getElementById('dnaStrand');
        const cas9 = document.getElementById('cas9');
        const log = document.getElementById('statusLog');

        if(input) {
            let mutation = input.includes("CAC") ? "CAC" : (input.includes("TTT") ? "TTT" : null);
            strand.innerHTML = mutation ? input.replace(mutation, `<span class="mutation">${mutation}</span>`) : input;

            // 시뮬레이션 시퀀스
            setTimeout(() => {
                log.innerHTML += "<p>[OK] 가이드 RNA(gRNA) 설계 및 최적화 완료.</p>";
            }, 1000);

            setTimeout(() => {
                log.innerHTML += "<p>[PROCESS] Cas9 복합체 투입... 타겟 위치 스캔 중.</p>";
                cas9.style.opacity = "1";
                const pos = input.indexOf(mutation);
                if(pos !== -1) {
                    cas9.style.left = `calc(50% - ${(input.length/2 * 30)}px + ${(pos * 35)}px)`;
                } else {
                    cas9.style.left = "50%";
                }
            }, 2500);

            setTimeout(() => {
                if(mutation) {
                    log.innerHTML += "<p class='success'>[SUCCESS] 변이 지점 절단 및 정상 염기 교정 완료(HDR).</p>";
                    strand.style.color = "#3fb950";
                    strand.innerHTML = input.replace(mutation, "CGC"); // 예시: 정상으로 교정된 모습
                } else {
                    log.innerHTML += "<p>[FAIL] 타겟 지점 불일치. 오프타겟 위험으로 작동 중단.</p>";
                }
            }, 5500);
        }
    </script>
</body>
</html>

